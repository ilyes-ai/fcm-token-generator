<!DOCTYPE html>
<html>
<head>
  <title>FCM Token Generator</title>
</head>
<body>
<button id="getTokenBtn">Get My FCM Token</button>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging.js";

  const firebaseConfig = {
  apiKey: "AIzaSyB3k5sFmPSxzPdRNRweG_-GRFnEawSYySQ",
  authDomain: "kifek-kifna.firebaseapp.com",
  projectId: "kifek-kifna",
  storageBucket: "kifek-kifna.firebasestorage.app",
  messagingSenderId: "1053021314855",
  appId: "1:1053021314855:web:ac007d5d1a17cf866f1302",
  measurementId: "G-T4LGPJ3V1B"
};
  const app = initializeApp(firebaseConfig);
  const messaging = getMessaging(app);

  document.getElementById("getTokenBtn").onclick = async () => {
    const permission = await Notification.requestPermission();
    console.log("Permission:", permission);

    if (permission !== "granted") {
      alert("Notifications permission denied");
      return;
    }

    const registration = await navigator.serviceWorker.register('firebase-messaging-sw.js');
    console.log("Service Worker registered:", registration);

    const token = await getToken(messaging, {
      vapidKey: "BBWLpu5ysMEJZdRCgz6mXTadrO0K3tc5gvy-jG4oEFMFyuCMWtSL7Gpr6mAD6XvBpOy5csXlotwiGi_TSNvOwzw",
      serviceWorkerRegistration: registration

    });

    console.log("FCM Token:", token);
    alert("Token: " + token);
  };
</script>

  <textarea id="tokenBox"></textarea>

</body>
</html>
